<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="lectureMapper">
	<select id="getListCount" resultType="_int">
		select count(*)
		from lecture
		where l_status='Y' and l_confirm='Y'
	</select>
	<!-- <resultMap type="hashmap" id="LectureResultSet">
		<id property="l_num" column="l_num"/>
		<result property="l_title" column="l_title"/>
		<result property="l_category" column="l_category"/>
		<result property="l_content" column="l_content"/>
		<result property="l_price" column="l_price"/>
		<result property="l_system" column="l_system"/>
		<result property="l_address" column="l_address"/>
		<result property="l_object" column="l_object"/>
		<result property="l_confirm" column="l_confirm"/>
		<result property="l_status" column="l_status"/>
		<result property="l_black" column="l_black"/>
		<result property="m_name" column="m_name"/>
		<result property="m_nickname" column="m_nickname"/>
		<result property="m_origin_name" column="m_origin_name"/>
		<result property="l_image_num" column="l_image_num"/>
		<result property="l_origin_name" column="l_origin_name"/>
		<result property="l_changed_name" column="l_changed_name"/>
		<result property="l_file_path" column="l_file_path"/>
	</resultMap>
	<resultMap type="Lecture_Image" id="LectureImageResultSet">	
		<id property="l_image_num" column="l_image_num"/>
		<result property="l_origin_name" column="l_origin_name"/>
		<result property="l_changed_name" column="l_changed_name"/>
		<result property="l_file_path" column="l_file_path"/>
		<result property="l_file_level" column="l_file_level"/>
		<result property="l_upload_date" column="l_upload_date"/>
		<result property="l_file_level" column="l_file_level"/>
		<result property="l_num" column="l_num"/>
	</resultMap> -->
	
	<select id="selectLectureList" resultType="hashmap">
		select l_num, l_content, l_title, l_category, l_price, l_address, l_confirm, l_image_num, l_origin_name, l_changed_name, l_file_path, m_name, m_nickname, m_origin_name
		from lecture l
			join lecture_image li using(l_num)
			join member m using(m_id)
			join member_image mi using(m_id)
		where l_confirm = 'Y' and l_status ='Y' and l_file_level=0
	</select>
	<select id="getCategoryListCount" parameterType="string" resultType="_int">
		select count(*)
		from lecture
		where l_status='Y' and l_confirm='Y' and l_category = #{l_category}
		order by l_num desc
	</select>
	<select id="selectLectureCategoryList" parameterType="string" resultType="hashmap">
		select l_num, l_content, l_title, l_category, l_price, l_address, l_confirm, l_image_num, l_origin_name, l_changed_name, l_file_path, m_name, m_nickname, m_origin_name
		from lecture l
			join lecture_image li using(l_num)
			join member m using(m_id)
			join member_image mi using(m_id)
		where l_confirm = 'Y' and l_status ='Y' and l_file_level=0 and l_category=#{l_category}
	</select>
	<select id="selectLecture" parameterType="_int" resultType="map">
		select l_num, l_content, l_title, l_category, l_price, l_address, l_confirm, m_name, m_nickname, m_origin_name
		from lecture l
			join member m using(m_id)
			join member_image mi using(m_id)
		where l_num=#{l_num}
	</select>
	<select id="selectLectureImage" parameterType="hashmap" resultType="map">
		select l_image_num, l_origin_name, l_changed_name, l_file_level, l_file_path, l_num
		from lecture_image
		where l_num=#{l_num} and l_file_level = #{MCR}
	</select>
</mapper>
